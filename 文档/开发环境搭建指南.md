# Shaker智能鸡尾酒推荐系统开发环境搭建指南

## 📋 文档信息
| 项目 | 内容 |
|------|------|
| **产品名称** | Shaker |
| **版本号** | MVP版本1.0.0 |
| **文档版本** | v1.0 |
| **创建日期** | 2024-08-28 |
| **项目负责人** | 郭锐 |
| **文档状态** | ✅ 已完成 | 

---

## 🎯 环境搭建概述

本文档将指导您完成Shaker项目的完整开发环境搭建，包括系统要求、工具安装、项目配置和验证步骤。

### 快速导航
- [系统要求](#系统要求)
- [基础工具安装](#基础工具安装)
- [项目初始化](#项目初始化)
- [开发工具配置](#开发工具配置)
- [环境验证](#环境验证)

---

## 💻 系统要求

### 操作系统支持
- **Windows**: Windows 10 1903+ / Windows 11
- **macOS**: macOS 10.15 Catalina+
- **Linux**: Ubuntu 18.04+ / CentOS 7+ / 其他主流发行版

### 硬件要求
- **CPU**: Intel i5 / AMD Ryzen 5 或更好
- **内存**: 8GB RAM 最低，16GB 推荐
- **存储**: 20GB 可用空间
- **网络**: 稳定的互联网连接（用于包下载和API调用）

---

## 🛠️ 基础工具安装

### 1. Node.js 安装

#### Windows 安装
```bash
# 下载并安装 Node.js 18 LTS
# 访问: https://nodejs.org/
# 下载 Windows Installer (.msi)
# 运行安装程序，选择默认设置

# 验证安装
node --version  # 应显示 v18.x.x
npm --version   # 应显示 9.x.x
```

#### macOS 安装
```bash
# 方法1: 官网下载
# 访问: https://nodejs.org/
# 下载 macOS Installer (.pkg)

# 方法2: 使用 Homebrew (推荐)
brew install node@18

# 验证安装
node --version
npm --version
```

#### Linux 安装
```bash
# Ubuntu/Debian
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# CentOS/RHEL
curl -fsSL https://rpm.nodesource.com/setup_18.x | sudo bash -
sudo yum install -y nodejs

# 验证安装
node --version
npm --version
```

### 2. Git 安装

#### Windows
```bash
# 下载并安装 Git for Windows
# 访问: https://git-scm.com/download/win
# 运行安装程序，推荐配置：
# - 默认编辑器: VS Code
# - 路径环境: Git from the command line
# - HTTPS传输: Use the OpenSSL library
# - 换行符: Checkout Windows-style, commit Unix-style
```

#### macOS
```bash
# 方法1: Xcode Command Line Tools
xcode-select --install

# 方法2: Homebrew
brew install git
```

#### Linux
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install git

# CentOS/RHEL
sudo yum install git
```

#### Git 配置
```bash
# 配置用户信息
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"

# 配置默认分支名
git config --global init.defaultBranch main

# 验证配置
git config --list
```

### 3. VS Code 安装

#### 所有平台
```bash
# 访问: https://code.visualstudio.com/
# 下载适合您系统的安装包
# 运行安装程序

# 或使用包管理器:
# Windows (Chocolatey): choco install vscode
# macOS (Homebrew): brew install --cask visual-studio-code
# Linux (Snap): sudo snap install code --classic
```

#### 必需扩展安装
```bash
# 在VS Code中按 Ctrl+Shift+X 打开扩展面板
# 搜索并安装以下扩展:

# 基础扩展
- ES7+ React/Redux/React-Native snippets
- TypeScript Hero
- Prettier - Code formatter
- ESLint
- Auto Rename Tag
- Bracket Pair Colorizer 2

# React开发
- React/Redux Snippets
- React Developer Tools

# 样式开发
- Tailwind CSS IntelliSense
- CSS Peek

# 工具增强
- GitLens — Git supercharged
- Thunder Client (API测试)
- Path Intellisense
- Material Icon Theme
```

### 4. 包管理器配置

#### 配置 npm 镜像源（中国用户推荐）
```bash
# 设置淘宝镜像源
npm config set registry https://registry.npmmirror.com

# 验证配置
npm config get registry

# 或者使用 nrm 管理多个源
npm install -g nrm
nrm ls
nrm use taobao
```

#### 配置 npm 缓存
```bash
# 清理缓存
npm cache clean --force

# 设置缓存目录（可选）
npm config set cache ~/.npm-cache

# 验证缓存配置
npm config get cache
```

---

## 🚀 项目初始化

### 1. 克隆项目仓库

```bash
# 创建项目目录
mkdir shaker-project
cd shaker-project

# 克隆仓库（如果已存在）
git clone <repository-url> .

# 或者初始化新仓库
git init
echo "# Shaker - 智能鸡尾酒推荐系统" > README.md
```

### 2. 项目结构创建

```bash
# 创建完整的项目目录结构
mkdir -p frontend/{src/{components,pages,stores,services,types,utils},public}
mkdir -p backend/{src/{controllers,services,middleware,routes,types,utils},tests}
mkdir -p docs/{api,deployment,user-guide}
mkdir -p scripts/{build,deploy,test}

# 创建配置文件
touch frontend/.env.example
touch backend/.env.example
touch .gitignore
```

### 3. 前端项目初始化

```bash
# 进入前端目录
cd frontend

# 使用 Vite 创建 React + TypeScript 项目
npm create vite@latest . -- --template react-ts

# 安装依赖
npm install

# 安装 Shaker 特定依赖
npm install @headlessui/react @heroicons/react framer-motion zustand react-router-dom axios

# 安装开发依赖
npm install -D tailwindcss postcss autoprefixer @types/node
npm install -D eslint-config-prettier eslint-plugin-react-hooks
npm install -D @testing-library/react @testing-library/jest-dom vitest jsdom

# 初始化 Tailwind CSS
npx tailwindcss init -p
```

### 4. 后端项目初始化

```bash
# 进入后端目录
cd ../backend

# 初始化 package.json
npm init -y

# 安装核心依赖
npm install express typescript ts-node cors helmet dotenv axios zod

# 安装类型定义
npm install -D @types/node @types/express @types/cors nodemon

# 安装开发工具
npm install -D eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin
npm install -D prettier eslint-config-prettier eslint-plugin-prettier
npm install -D vitest supertest @types/supertest

# 创建 TypeScript 配置
npx tsc --init
```

---

## ⚙️ 开发工具配置

### 1. VS Code 工作区配置

创建 `.vscode/settings.json`:
```json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true,
    "source.organizeImports": true
  },
  "typescript.preferences.importModuleSpecifier": "relative",
  "emmet.includeLanguages": {
    "javascript": "javascriptreact",
    "typescript": "typescriptreact"
  },
  "files.associations": {
    "*.css": "tailwindcss"
  },
  "tailwindCSS.includeLanguages": {
    "typescript": "javascript",
    "typescriptreact": "javascript"
  }
}
```

创建 `.vscode/extensions.json`:
```json
{
  "recommendations": [
    "bradlc.vscode-tailwindcss",
    "esbenp.prettier-vscode",
    "dbaeumer.vscode-eslint",
    "ms-vscode.vscode-typescript-next",
    "formulahendry.auto-rename-tag",
    "christian-kohler.path-intellisense",
    "ms-vscode.vscode-json",
    "rangav.vscode-thunder-client"
  ]
}
```

### 2. 前端配置文件

#### `frontend/vite.config.ts`:
```typescript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react-swc'
import { resolve } from 'path'

export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      '@': resolve(__dirname, 'src'),
    },
  },
  server: {
    port: 5173,
    proxy: {
      '/api': {
        target: 'http://localhost:3001',
        changeOrigin: true,
      },
    },
  },
  build: {
    outDir: 'dist',
    sourcemap: false,
  },
})
```

#### `frontend/tailwind.config.js`:
```javascript
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      colors: {
        primary: {
          50: '#fef7ee',
          500: '#f97316',
          600: '#ea580c',
          700: '#c2410c',
        },
        secondary: {
          50: '#f8fafc',
          500: '#64748b',
          600: '#475569',
          700: '#334155',
        }
      },
      fontFamily: {
        sans: ['Inter', 'system-ui', 'sans-serif'],
      },
    },
  },
  plugins: [],
}
```

#### `frontend/.eslintrc.json`:
```json
{
  "extends": [
    "eslint:recommended",
    "@typescript-eslint/recommended",
    "plugin:react-hooks/recommended",
    "prettier"
  ],
  "parser": "@typescript-eslint/parser",
  "plugins": ["@typescript-eslint"],
  "rules": {
    "react-hooks/exhaustive-deps": "warn",
    "@typescript-eslint/no-unused-vars": "error",
    "@typescript-eslint/explicit-function-return-type": "off",
    "@typescript-eslint/explicit-module-boundary-types": "off"
  }
}
```

### 3. 后端配置文件

#### `backend/tsconfig.json`:
```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "commonjs",
    "lib": ["ES2020"],
    "outDir": "./dist",
    "rootDir": "./src",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "resolveJsonModule": true,
    "declaration": true,
    "sourceMap": true,
    "baseUrl": "./src",
    "paths": {
      "@/*": ["./*"]
    }
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist", "tests"]
}
```

#### `backend/package.json` scripts:
```json
{
  "scripts": {
    "dev": "nodemon src/app.ts",
    "build": "tsc",
    "start": "node dist/app.js",
    "test": "vitest",
    "test:watch": "vitest --watch",
    "lint": "eslint src --ext .ts",
    "lint:fix": "eslint src --ext .ts --fix",
    "format": "prettier --write src/**/*.ts"
  }
}
```

### 4. 环境变量配置

#### `frontend/.env.example`:
```bash
# API配置
VITE_API_BASE_URL=http://localhost:3001
VITE_APP_NAME=Shaker
VITE_APP_VERSION=1.0.0

# 功能开关
VITE_ENABLE_MOCK=false
VITE_ENABLE_DEBUG=true
```

#### `backend/.env.example`:
```bash
# 服务器配置
PORT=3001
NODE_ENV=development

# Coze API配置
COZE_API_KEY=your_coze_api_key_here
COZE_API_ENDPOINT=https://api.coze.cn
COZE_TIMEOUT=15000

# 安全配置
CORS_ORIGIN=http://localhost:5173
JWT_SECRET=your_jwt_secret_here

# 监控配置
LOG_LEVEL=info
ENABLE_METRICS=true
```

### 5. Git 配置

#### `.gitignore`:
```bash
# 依赖目录
node_modules/
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# 构建输出
dist/
build/
.next/
out/

# 环境变量
.env
.env.local
.env.production
.env.staging

# IDE配置
.vscode/settings.json
.idea/
*.swp
*.swo

# 操作系统文件
.DS_Store
Thumbs.db

# 日志文件
logs/
*.log

# 测试覆盖率
coverage/
.nyc_output/

# 临时文件
.tmp/
temp/
```

---

## ✅ 环境验证

### 1. 基础工具验证

```bash
# 验证 Node.js 版本
node --version
# 期望输出: v18.x.x 或更高

# 验证 npm 版本
npm --version
# 期望输出: 9.x.x 或更高

# 验证 Git 版本
git --version
# 期望输出: git version 2.30.0 或更高

# 验证 TypeScript 全局安装（可选）
npx tsc --version
# 期望输出: Version 5.x.x
```

### 2. 前端环境验证

```bash
cd frontend

# 安装依赖
npm install

# 运行开发服务器
npm run dev

# 在浏览器中访问: http://localhost:5173
# 应该看到 Vite + React 欢迎页面

# 验证构建
npm run build
# 应该成功生成 dist/ 目录

# 验证代码检查
npm run lint
# 应该无错误输出

# 验证测试
npm run test
# 应该运行测试套件
```

### 3. 后端环境验证

```bash
cd backend

# 安装依赖
npm install

# 复制环境变量文件
cp .env.example .env
# 编辑 .env 文件，填入正确的配置

# 运行开发服务器
npm run dev

# 验证服务器响应
curl http://localhost:3001/api/health
# 期望输出: {"status":"ok","timestamp":"..."}

# 验证构建
npm run build
# 应该成功生成 dist/ 目录

# 验证代码检查
npm run lint
# 应该无错误输出
```

### 4. 全栈集成验证

```bash
# 同时运行前后端（需要两个终端）

# 终端1: 启动后端
cd backend
npm run dev

# 终端2: 启动前端
cd frontend
npm run dev

# 验证前后端通信
# 在前端页面中发起API请求
# 检查浏览器控制台和后端日志
```

---

## 🔧 开发工作流

### 1. 日常开发流程

```bash
# 1. 更新代码
git pull origin main

# 2. 安装新依赖（如有）
cd frontend && npm install
cd ../backend && npm install

# 3. 启动开发环境
# 终端1
cd backend && npm run dev

# 终端2
cd frontend && npm run dev

# 4. 开发过程中
# 代码会自动热重载
# ESLint 会实时检查代码
# TypeScript 会实时类型检查

# 5. 提交代码前
npm run lint        # 检查代码规范
npm run test        # 运行测试
npm run build       # 验证构建
```

### 2. 代码质量检查

```bash
# 前端代码质量检查
cd frontend
npm run lint:fix    # 自动修复可修复的问题
npm run format      # 格式化代码
npm run test        # 运行测试

# 后端代码质量检查
cd backend
npm run lint:fix    # 自动修复可修复的问题
npm run format      # 格式化代码
npm run test        # 运行测试
```

---

## 🐛 常见问题解决

### Node.js 相关

**问题**: `node: command not found`
```bash
# 解决方案: 重新安装 Node.js 或添加到 PATH
echo 'export PATH="/usr/local/bin:$PATH"' >> ~/.bashrc
source ~/.bashrc
```

**问题**: npm 安装依赖很慢
```bash
# 解决方案: 使用淘宝镜像
npm config set registry https://registry.npmmirror.com
```

### Git 相关

**问题**: Git 提交时换行符警告
```bash
# Windows 用户
git config --global core.autocrlf true

# macOS/Linux 用户
git config --global core.autocrlf input
```

### VS Code 相关

**问题**: TypeScript 报错 "Cannot find module"
```bash
# 解决方案: 重启 TypeScript 服务
# 在 VS Code 中按 Ctrl+Shift+P
# 输入: TypeScript: Restart TS Server
```

### 端口冲突

**问题**: 端口 3001 或 5173 被占用
```bash
# 查找占用端口的进程
lsof -i :3001
lsof -i :5173

# 杀死进程（替换 PID）
kill -9 <PID>

# 或者修改配置使用其他端口
```

---

## 📞 支持和帮助

### 获取帮助的方式

1. **查看文档**: 阅读项目README和相关文档
2. **检查日志**: 查看控制台和终端输出
3. **搜索错误**: 在搜索引擎中搜索具体错误信息
4. **社区支持**: 在相关技术社区提问

### 有用的资源链接

- [Node.js 官方文档](https://nodejs.org/docs/)
- [React 官方文档](https://react.dev/)
- [TypeScript 手册](https://www.typescriptlang.org/docs/)
- [Vite 官方指南](https://vitejs.dev/guide/)
- [Tailwind CSS 文档](https://tailwindcss.com/docs)
- [Express.js 指南](https://expressjs.com/en/guide/)

---

## ✨ 下一步

环境搭建完成后，您可以：

1. 阅读 [需求文档](./需求文档.md) 了解项目功能
2. 查看 [技术规格](./技术规格.md) 了解技术实现
3. 参考 [项目规划](./项目规划.md) 了解开发计划
4. 开始开发第一个功能模块

---

*文档版本：v1.0*  
*最后更新：2024-08-28*  
*如有问题请及时反馈和更新*
