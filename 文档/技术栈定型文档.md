# Shakeræ™ºèƒ½é¸¡å°¾é…’æ¨èç³»ç»ŸæŠ€æœ¯æ ˆå®šå‹æ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯
| é¡¹ç›® | å†…å®¹ |
|------|------|
| **äº§å“åç§°** | Shaker |
| **ç‰ˆæœ¬å·** | MVPç‰ˆæœ¬1.0.0 |
| **æ–‡æ¡£ç‰ˆæœ¬** | v1.0 |
| **åˆ›å»ºæ—¥æœŸ** | 2024-08-28 |
| **é¡¹ç›®è´Ÿè´£äºº** | éƒ­é” |
| **æ–‡æ¡£çŠ¶æ€** | âœ… å·²å®šå‹ | 

---

## ğŸ¯ æ ¸å¿ƒæŠ€æœ¯æ ˆ

### 1. Webåº”ç”¨æ¶æ„ï¼ˆå‰åç«¯åˆ†ç¦»ï¼‰
```json
{
  "architecture": "å‰åç«¯åˆ†ç¦»",
  "frontend_deployment": "Vercel",
  "backend_deployment": "Railway/Render",
  "ai_service": "Coze API",
  "data_storage": "æ— æ•°æ®åº“(MVPç‰ˆæœ¬)"
}
```

**é‡è¦è¯´æ˜**ï¼š
- âœ… **å‰åç«¯åˆ†ç¦»**ï¼šå‰ç«¯è´Ÿè´£UIäº¤äº’ï¼Œåç«¯è´Ÿè´£APIå’ŒAIé›†æˆ
- âœ… **æ— æ•°æ®åº“ä¾èµ–**ï¼šMVPç‰ˆæœ¬ä¸ä¿å­˜ç”¨æˆ·æ•°æ®ï¼Œçº¯æ¨èæœåŠ¡
- âœ… **AIé©±åŠ¨**ï¼šæ ¸å¿ƒæ¨èé€»è¾‘é€šè¿‡Coze APIå®ç°
- âœ… **äº‘ç«¯éƒ¨ç½²**ï¼šåˆ©ç”¨ç°ä»£åŒ–çš„äº‘æœåŠ¡å¿«é€Ÿä¸Šçº¿

### 2. å‰ç«¯æŠ€æœ¯æ ˆ
| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | å®‰è£…å‘½ä»¤ |
|------|------|------|----------|
| **React** | `^18.2.0` | æ ¸å¿ƒUIæ¡†æ¶ | `npm install react@18.2.0` |
| **React DOM** | `^18.2.0` | DOMæ¸²æŸ“ | `npm install react-dom@18.2.0` |
| **TypeScript** | `^5.3.0` | ç±»å‹ç³»ç»Ÿ | `npm install typescript@5.3.0` |
| **Vite** | `^5.0.0` | æ„å»ºå·¥å…· | `npm install vite@5.0.0` |

### 3. å‰ç«¯UIæ¡†æ¶
| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | å®‰è£…å‘½ä»¤ |
|------|------|------|----------|
| **Tailwind CSS** | `^3.4.0` | CSSæ¡†æ¶ | `npm install tailwindcss@3.4.0` |
| **Headless UI** | `^1.7.17` | æ— æ ·å¼ç»„ä»¶ | `npm install @headlessui/react@1.7.17` |
| **Heroicons** | `^2.0.18` | å›¾æ ‡åº“ | `npm install @heroicons/react@2.0.18` |
| **Framer Motion** | `^10.16.16` | åŠ¨ç”»åº“ | `npm install framer-motion@10.16.16` |

### 4. å‰ç«¯çŠ¶æ€ç®¡ç†
| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | å®‰è£…å‘½ä»¤ |
|------|------|------|----------|
| **Zustand** | `^4.4.7` | è½»é‡çŠ¶æ€ç®¡ç† | `npm install zustand@4.4.7` |
| **React Router** | `^6.20.0` | è·¯ç”±ç®¡ç† | `npm install react-router-dom@6.20.0` |

### 5. åç«¯æŠ€æœ¯æ ˆ
| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | å®‰è£…å‘½ä»¤ |
|------|------|------|----------|
| **Node.js** | `^18.19.0` | è¿è¡Œæ—¶ç¯å¢ƒ | `å®˜æ–¹ä¸‹è½½å®‰è£…` |
| **Express** | `^4.18.2` | Webæ¡†æ¶ | `npm install express@4.18.2` |
| **TypeScript** | `^5.3.0` | ç±»å‹ç³»ç»Ÿ | `npm install typescript@5.3.0` |
| **ts-node** | `^10.9.2` | TSè¿è¡Œæ—¶ | `npm install ts-node@10.9.2` |

### 6. åç«¯å·¥å…·åº“
| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | å®‰è£…å‘½ä»¤ |
|------|------|------|----------|
| **cors** | `^2.8.5` | è·¨åŸŸå¤„ç† | `npm install cors@2.8.5` |
| **helmet** | `^7.1.0` | å®‰å…¨ä¸­é—´ä»¶ | `npm install helmet@7.1.0` |
| **dotenv** | `^16.3.1` | ç¯å¢ƒå˜é‡ | `npm install dotenv@16.3.1` |
| **axios** | `^1.6.2` | HTTPå®¢æˆ·ç«¯ | `npm install axios@1.6.2` |
| **zod** | `^3.22.4` | æ•°æ®éªŒè¯ | `npm install zod@3.22.4` |

### 7. AIæœåŠ¡é›†æˆ
| æœåŠ¡ | ç”¨é€” | é…ç½® |
|------|------|------|
| **Coze API** | æ ¸å¿ƒæ¨èå¼•æ“ | API Key + Endpoint |
| **System Prompt** | AIè¡Œä¸ºå®šä¹‰ | è‡ªå®šä¹‰è°ƒé…’å¸ˆè§’è‰² |
| **Response Parser** | å“åº”è§£æ | JSONæ ¼å¼æ ‡å‡†åŒ– |

### 8. å¼€å‘å·¥å…·
| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | å®‰è£…å‘½ä»¤ |
|------|------|------|----------|
| **ESLint** | `^8.55.0` | ä»£ç æ£€æŸ¥ | `npm install eslint@8.55.0` |
| **Prettier** | `^3.1.0` | ä»£ç æ ¼å¼åŒ– | `npm install prettier@3.1.0` |
| **Husky** | `^8.0.3` | Gité’©å­ | `npm install husky@8.0.3` |
| **lint-staged** | `^15.2.0` | æš‚å­˜åŒºæ£€æŸ¥ | `npm install lint-staged@15.2.0` |

### 9. æµ‹è¯•æ¡†æ¶
| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | å®‰è£…å‘½ä»¤ |
|------|------|------|----------|
| **Vitest** | `^1.0.0` | æµ‹è¯•è¿è¡Œå™¨ | `npm install vitest@1.0.0` |
| **React Testing Library** | `^14.1.2` | Reactç»„ä»¶æµ‹è¯• | `npm install @testing-library/react@14.1.2` |
| **jsdom** | `^23.0.1` | DOMç¯å¢ƒæ¨¡æ‹Ÿ | `npm install jsdom@23.0.1` |

---

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

### å‰ç«¯é¡¹ç›®ç»“æ„
```
frontend/
â”œâ”€â”€ public/                 # é™æ€èµ„æº
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ src/                   # æºä»£ç 
â”‚   â”œâ”€â”€ components/        # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/           # åŸºç¡€UIç»„ä»¶
â”‚   â”‚   â””â”€â”€ forms/        # è¡¨å•ç»„ä»¶
â”‚   â”œâ”€â”€ pages/            # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ HomePage.tsx
â”‚   â”‚   â”œâ”€â”€ RecommendPage.tsx
â”‚   â”‚   â””â”€â”€ ResultPage.tsx
â”‚   â”œâ”€â”€ stores/           # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ useAppStore.ts
â”‚   â”œâ”€â”€ services/         # APIæœåŠ¡
â”‚   â”‚   â””â”€â”€ api.ts
â”‚   â”œâ”€â”€ types/            # ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ helpers.ts
â”‚   â”œâ”€â”€ App.tsx           # åº”ç”¨æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.tsx          # åº”ç”¨å…¥å£
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ tailwind.config.js
â””â”€â”€ tsconfig.json
```

### åç«¯é¡¹ç›®ç»“æ„
```
backend/
â”œâ”€â”€ src/                  # æºä»£ç 
â”‚   â”œâ”€â”€ controllers/      # æ§åˆ¶å™¨
â”‚   â”‚   â””â”€â”€ recommend.ts
â”‚   â”œâ”€â”€ services/         # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ cozeService.ts
â”‚   â”‚   â””â”€â”€ promptBuilder.ts
â”‚   â”œâ”€â”€ middleware/       # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ cors.ts
â”‚   â”‚   â”œâ”€â”€ errorHandler.ts
â”‚   â”‚   â””â”€â”€ validation.ts
â”‚   â”œâ”€â”€ types/            # ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ helpers.ts
â”‚   â”œâ”€â”€ routes/           # è·¯ç”±å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ app.ts            # åº”ç”¨é…ç½®
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ .env.example
```

---

## âš™ï¸ ç¯å¢ƒé…ç½®

### å¼€å‘ç¯å¢ƒè¦æ±‚
```bash
# ç³»ç»Ÿè¦æ±‚
Node.js >= 18.0.0
npm >= 9.0.0
Git >= 2.30.0

# æ¨èå·¥å…·
VS Code + æ‰©å±•åŒ…
Chrome 90+ (å¼€å‘è°ƒè¯•)
Postman (APIæµ‹è¯•)
```

### ç¯å¢ƒå˜é‡é…ç½®
```bash
# å‰ç«¯ç¯å¢ƒå˜é‡ (.env)
VITE_API_BASE_URL=http://localhost:3001
VITE_APP_NAME=Shaker
VITE_APP_VERSION=1.0.0

# åç«¯ç¯å¢ƒå˜é‡ (.env)
PORT=3001
NODE_ENV=development
COZE_API_KEY=your_coze_api_key
COZE_API_ENDPOINT=https://api.coze.cn
CORS_ORIGIN=http://localhost:5173
```

### VS Code æ¨èæ‰©å±•
```json
{
  "recommendations": [
    "bradlc.vscode-tailwindcss",
    "esbenp.prettier-vscode",
    "dbaeumer.vscode-eslint",
    "ms-vscode.vscode-typescript-next",
    "formulahendry.auto-rename-tag",
    "christian-kohler.path-intellisense",
    "ms-vscode.vscode-json"
  ]
}
```

---

## ğŸš€ æ„å»ºé…ç½®

### å‰ç«¯æ„å»ºé…ç½® (vite.config.ts)
```typescript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react-swc'
import { resolve } from 'path'

export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      '@': resolve(__dirname, 'src'),
    },
  },
  build: {
    target: 'es2015',
    outDir: 'dist',
    sourcemap: false,
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['react', 'react-dom'],
          ui: ['@headlessui/react', 'framer-motion'],
        },
      },
    },
  },
  server: {
    port: 5173,
    proxy: {
      '/api': {
        target: 'http://localhost:3001',
        changeOrigin: true,
      },
    },
  },
})
```

### åç«¯æ„å»ºé…ç½® (tsconfig.json)
```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "commonjs",
    "lib": ["ES2020"],
    "outDir": "./dist",
    "rootDir": "./src",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "resolveJsonModule": true,
    "declaration": true,
    "declarationMap": true,
    "sourceMap": true
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist"]
}
```

---

## ğŸ“¦ éƒ¨ç½²æ–¹æ¡ˆ

### å‰ç«¯éƒ¨ç½² (Vercel)
```json
{
  "name": "shaker-frontend",
  "version": 1,
  "builds": [
    {
      "src": "package.json",
      "use": "@vercel/static-build",
      "config": {
        "distDir": "dist"
      }
    }
  ],
  "routes": [
    {
      "src": "/api/(.*)",
      "dest": "https://shaker-backend.railway.app/api/$1"
    },
    {
      "src": "/(.*)",
      "dest": "/index.html"
    }
  ]
}
```

### åç«¯éƒ¨ç½² (Railway)
```dockerfile
FROM node:18-alpine

WORKDIR /app

COPY package*.json ./
RUN npm ci --only=production

COPY . .
RUN npm run build

EXPOSE $PORT

CMD ["npm", "start"]
```

---

## ğŸ”§ å¼€å‘è„šæœ¬

### å‰ç«¯è„šæœ¬ (package.json)
```json
{
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview",
    "lint": "eslint src --ext ts,tsx --report-unused-disable-directives --max-warnings 0",
    "lint:fix": "eslint src --ext ts,tsx --fix",
    "format": "prettier --write src/**/*.{ts,tsx,css,md}",
    "test": "vitest",
    "test:ui": "vitest --ui",
    "test:coverage": "vitest --coverage"
  }
}
```

### åç«¯è„šæœ¬ (package.json)
```json
{
  "scripts": {
    "dev": "ts-node src/app.ts",
    "build": "tsc",
    "start": "node dist/app.js",
    "lint": "eslint src --ext .ts",
    "lint:fix": "eslint src --ext .ts --fix",
    "format": "prettier --write src/**/*.ts",
    "test": "vitest",
    "test:watch": "vitest --watch"
  }
}
```

---

## ğŸ“Š æ€§èƒ½ç›®æ ‡

### å‰ç«¯æ€§èƒ½
| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹é‡æ–¹å¼ |
|------|--------|----------|
| **é¦–å±åŠ è½½æ—¶é—´** | < 3ç§’ | Lighthouse |
| **äº¤äº’å“åº”æ—¶é—´** | < 200ms | Chrome DevTools |
| **Bundleå¤§å°** | < 500KB | Webpack Bundle Analyzer |
| **Core Web Vitals** | è‰¯å¥½ | PageSpeed Insights |

### åç«¯æ€§èƒ½
| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹é‡æ–¹å¼ |
|------|--------|----------|
| **APIå“åº”æ—¶é—´** | < 500ms | æ¥å£ç›‘æ§ |
| **AIæ¨èæ—¶é—´** | < 15ç§’ | ä¸šåŠ¡ç›‘æ§ |
| **å¹¶å‘å¤„ç†** | 100+ | å‹åŠ›æµ‹è¯• |
| **å†…å­˜ä½¿ç”¨** | < 256MB | ç³»ç»Ÿç›‘æ§ |

---

## ğŸ”’ å®‰å…¨é…ç½®

### å‰ç«¯å®‰å…¨
- **CSPé…ç½®**ï¼šé˜²æ­¢XSSæ”»å‡»
- **HTTPSå¼ºåˆ¶**ï¼šç”Ÿäº§ç¯å¢ƒå¼ºåˆ¶ä½¿ç”¨HTTPS
- **æ•æ„Ÿä¿¡æ¯**ï¼šä¸åœ¨å‰ç«¯å­˜å‚¨APIå¯†é’¥

### åç«¯å®‰å…¨
- **CORSé…ç½®**ï¼šé™åˆ¶è·¨åŸŸè®¿é—®
- **è¾“å…¥éªŒè¯**ï¼šæ‰€æœ‰ç”¨æˆ·è¾“å…¥ä¸¥æ ¼éªŒè¯
- **APIé™æµ**ï¼šé˜²æ­¢APIæ»¥ç”¨
- **é”™è¯¯å¤„ç†**ï¼šä¸æš´éœ²æ•æ„Ÿä¿¡æ¯

---

*æ–‡æ¡£ç‰ˆæœ¬ï¼šv1.0*  
*æœ€åæ›´æ–°ï¼š2024-08-28*  
*æŠ€æœ¯æ ˆå·²é”å®šï¼Œå¦‚éœ€å˜æ›´è¯·é‡æ–°è¯„å®¡*
