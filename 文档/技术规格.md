# Shakeræ™ºèƒ½é¸¡å°¾é…’æ¨èç³»ç»ŸæŠ€æœ¯è§„æ ¼

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯
| é¡¹ç›® | å†…å®¹ |
|------|------|
| **äº§å“åç§°** | Shaker |
| **ç‰ˆæœ¬å·** | MVPç‰ˆæœ¬1.0.0 |
| **æ–‡æ¡£ç‰ˆæœ¬** | v1.0 |
| **åˆ›å»ºæ—¥æœŸ** | 2024-08-28 |
| **é¡¹ç›®è´Ÿè´£äºº** | éƒ­é” |
| **å¼€å‘å‘¨æœŸ** | 1å‘¨ |
| **æ–‡æ¡£çŠ¶æ€** | ğŸ”„ ä¿®è®¢ä¸­ | 

---

## âš™ï¸ æŠ€æœ¯è§„æ ¼

### 1 æŠ€æœ¯æ¶æ„

#### ğŸ¯ æ¶æ„è¯´æ˜
> **é‡è¦è¯´æ˜**ï¼šShaker MVPç‰ˆæœ¬1.0.0åŸºäºç°ä»£WebæŠ€æœ¯æ ˆï¼Œé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ã€‚å‰ç«¯è´Ÿè´£ç”¨æˆ·äº¤äº’ï¼Œåç«¯è´Ÿè´£AIæ¨èæœåŠ¡ã€‚**MVPç‰ˆæœ¬æ— ç”¨æˆ·ç³»ç»Ÿå’Œæ•°æ®å­˜å‚¨**ï¼Œä¸“æ³¨æ ¸å¿ƒæ¨èåŠŸèƒ½éªŒè¯ã€‚

#### ğŸ“‹ æŠ€æœ¯æ ˆé€‰æ‹©
```
- å‰ç«¯æ¡†æ¶ï¼šReact 18 + TypeScript + Vite
- UIåº“ï¼šTailwind CSS + Headless UI
- çŠ¶æ€ç®¡ç†ï¼šZustand
- åç«¯æ¡†æ¶ï¼šNode.js + Express + TypeScript
- AIæœåŠ¡ï¼šCoze API
- éƒ¨ç½²æ–¹æ¡ˆï¼šVercel(å‰ç«¯) + Railway(åç«¯)
```

### 2 æŠ€æœ¯çº¦æŸ
- [ ] **å…¼å®¹æ€§è¦æ±‚**ï¼š
  - **æµè§ˆå™¨æ”¯æŒ**ï¼šChrome 90+ã€Safari 14+ã€Firefox 88+ã€Edge 90+ï¼ˆè¦†ç›–95%ç”¨æˆ·ï¼‰
  - **ç§»åŠ¨è®¾å¤‡æ”¯æŒ**ï¼šiOS 13+ã€Android 8+
  - **å±å¹•åˆ†è¾¨ç‡**ï¼šæœ€ä½æ”¯æŒ320pxå®½åº¦ï¼Œä¼˜åŒ–1920Ã—1080æ˜¾ç¤ºæ•ˆæœ
  - **ç½‘ç»œç¯å¢ƒ**ï¼šæ”¯æŒ3Gç½‘ç»œï¼Œä¼˜åŒ–4G/WiFiä½“éªŒ
  - **è¯­è¨€æ”¯æŒ**ï¼šä¸­æ–‡ç®€ä½“ä¸ºä¸»ï¼Œé¢„ç•™å›½é™…åŒ–æ‰©å±•æ¥å£
- [ ] **æ€§èƒ½è¦æ±‚**ï¼š
  - **é¡µé¢åŠ è½½æ—¶é—´**ï¼šé¦–å±åŠ è½½â‰¤3ç§’ï¼Œè·¯ç”±åˆ‡æ¢â‰¤500ms
  - **APIå“åº”æ—¶é—´**ï¼šæ¨èæ¥å£â‰¤15ç§’ï¼Œå…¶ä»–æ¥å£â‰¤500ms
  - **ç”¨æˆ·æ“ä½œå“åº”**ï¼šUIäº¤äº’â‰¤200msï¼Œè¡¨å•æäº¤â‰¤1ç§’
  - **å†…å­˜ä½¿ç”¨**ï¼šå‰ç«¯è¿è¡Œæ—¶â‰¤100MBï¼Œåç«¯æœåŠ¡â‰¤256MB
  - **å¹¶å‘å¤„ç†**ï¼šæ”¯æŒ100+ç”¨æˆ·åŒæ—¶ä½¿ç”¨ï¼ŒAPIè°ƒç”¨é˜Ÿåˆ—ç®¡ç†
- [ ] **å®‰å…¨è¦æ±‚**ï¼š
  - **æ•°æ®ä¼ è¾“**ï¼šç”Ÿäº§ç¯å¢ƒå¼ºåˆ¶HTTPSï¼ŒAPIé€šä¿¡åŠ å¯†
  - **è¾“å…¥éªŒè¯**ï¼šæ‰€æœ‰ç”¨æˆ·è¾“å…¥ä¸¥æ ¼éªŒè¯å’Œè¿‡æ»¤
  - **APIå®‰å…¨**ï¼šåç«¯APIå¯†é’¥ä¿æŠ¤ï¼Œå‰ç«¯ä¸æš´éœ²æ•æ„Ÿä¿¡æ¯
  - **é”™è¯¯å¤„ç†**ï¼šä¼˜é›…çš„é”™è¯¯æç¤ºï¼Œä¸æš´éœ²ç³»ç»Ÿå†…éƒ¨ä¿¡æ¯
  - **è®¿é—®æ§åˆ¶**ï¼šAPIé¢‘ç‡é™åˆ¶ï¼Œé˜²æ­¢æ¶æ„è¯·æ±‚

### 3 ç³»ç»Ÿæ¶æ„è®¾è®¡

#### ğŸ—ï¸ æ•´ä½“æ¶æ„å›¾
```mermaid
graph TB
    A[ç”¨æˆ·æµè§ˆå™¨] --> B[Vercel CDN]
    B --> C[Reactå‰ç«¯åº”ç”¨]
    C --> D[Railwayåç«¯æœåŠ¡]
    D --> E[Coze AI API]
    
    C --> F[æœ¬åœ°å­˜å‚¨]
    D --> G[å†…å­˜ç¼“å­˜]
    
    H[ç›‘æ§ç³»ç»Ÿ] --> C
    H --> D
    
    style A fill:#e1f5fe
    style C fill:#f3e5f5
    style D fill:#e8f5e8
    style E fill:#fff3e0
```

#### ğŸ“¦ å‰ç«¯æ¶æ„
```typescript
// å‰ç«¯æŠ€æœ¯æ¶æ„
{
  "è§†å›¾å±‚": "Reactç»„ä»¶ + JSX",
  "çŠ¶æ€ç®¡ç†": "Zustand + React Context",
  "è·¯ç”±ç®¡ç†": "React Router 6",
  "æ ·å¼æ–¹æ¡ˆ": "Tailwind CSS + CSS Modules",
  "ç±»å‹æ£€æŸ¥": "TypeScript",
  "æ„å»ºå·¥å…·": "Vite + SWC",
  "ä»£ç è´¨é‡": "ESLint + Prettier",
  "æµ‹è¯•æ¡†æ¶": "Vitest + React Testing Library"
}
```

#### ğŸ”§ åç«¯æ¶æ„
```typescript
// åç«¯æŠ€æœ¯æ¶æ„
{
  "Webæ¡†æ¶": "Express.js",
  "ç¼–ç¨‹è¯­è¨€": "TypeScript",
  "APIè®¾è®¡": "RESTful",
  "æ•°æ®éªŒè¯": "Zod",
  "é”™è¯¯å¤„ç†": "ç»Ÿä¸€é”™è¯¯ä¸­é—´ä»¶",
  "æ—¥å¿—ç³»ç»Ÿ": "Console + äº‘ç«¯ç›‘æ§",
  "ç¼“å­˜ç­–ç•¥": "å†…å­˜ç¼“å­˜",
  "AIé›†æˆ": "Coze APIå®¢æˆ·ç«¯"
}
```

---

## ğŸ¨ å‰ç«¯æŠ€æœ¯è§„æ ¼

### 1 ç»„ä»¶æ¶æ„è®¾è®¡

#### ğŸ“‹ ç»„ä»¶å±‚çº§ç»“æ„
```
App (åº”ç”¨æ ¹ç»„ä»¶)
â”œâ”€â”€ Router (è·¯ç”±å®¹å™¨)
â”œâ”€â”€ Layout (å¸ƒå±€ç»„ä»¶)
â”‚   â”œâ”€â”€ Header (å¤´éƒ¨å¯¼èˆª)
â”‚   â”œâ”€â”€ Main (ä¸»è¦å†…å®¹åŒº)
â”‚   â””â”€â”€ Footer (åº•éƒ¨ä¿¡æ¯)
â””â”€â”€ Pages (é¡µé¢ç»„ä»¶)
    â”œâ”€â”€ HomePage (é¦–é¡µ)
    â”œâ”€â”€ RecommendFlow (æ¨èæµç¨‹)
    â”‚   â”œâ”€â”€ SceneSelect (åœºæ™¯é€‰æ‹©)
    â”‚   â”œâ”€â”€ MoodSelect (å¿ƒæƒ…é€‰æ‹©)
    â”‚   â”œâ”€â”€ IngredientSelect (ææ–™é€‰æ‹©)
    â”‚   â”œâ”€â”€ PreferenceSet (åå¥½è®¾ç½®)
    â”‚   â””â”€â”€ SpecialRequirements (ç‰¹æ®Šè¦æ±‚)
    â”œâ”€â”€ ResultPage (ç»“æœå±•ç¤º)
    â”‚   â”œâ”€â”€ RecommendList (æ¨èåˆ—è¡¨)
    â”‚   â””â”€â”€ CocktailDetail (è¯¦æƒ…å±•ç¤º)
    â””â”€â”€ ErrorPage (é”™è¯¯é¡µé¢)
```

#### ğŸ§© åŸºç¡€ç»„ä»¶åº“
```typescript
// UIç»„ä»¶è§„æ ¼
interface ComponentLibrary {
  // åŸºç¡€ç»„ä»¶
  Button: {
    variants: ['primary', 'secondary', 'outline', 'ghost'];
    sizes: ['sm', 'md', 'lg'];
    states: ['default', 'hover', 'active', 'disabled'];
  };
  
  Card: {
    variants: ['default', 'elevated', 'outlined'];
    clickable: boolean;
    loading: boolean;
  };
  
  Input: {
    types: ['text', 'search', 'textarea'];
    states: ['default', 'focus', 'error', 'disabled'];
    validation: boolean;
  };
  
  // è¡¨å•ç»„ä»¶
  Slider: {
    range: [number, number];
    step: number;
    marks: boolean;
    tooltip: boolean;
  };
  
  Checkbox: {
    states: ['unchecked', 'checked', 'indeterminate'];
    labelPosition: 'left' | 'right';
  };
  
  Select: {
    multiple: boolean;
    searchable: boolean;
    clearable: boolean;
  };
}
```

### 2 çŠ¶æ€ç®¡ç†è§„æ ¼

#### ğŸ—„ï¸ å…¨å±€çŠ¶æ€è®¾è®¡
```typescript
// ZustandçŠ¶æ€ç®¡ç†
interface AppState {
  // ç”¨æˆ·è¾“å…¥çŠ¶æ€
  userInput: {
    scene: SceneType | null;
    moods: MoodType[];
    ingredients: IngredientType[];
    preferences: PreferenceType;
    specialRequirements: string;
  };
  
  // æ¨èç»“æœçŠ¶æ€
  recommendations: {
    data: CocktailRecommendation[];
    loading: boolean;
    error: string | null;
  };
  
  // UIçŠ¶æ€
  ui: {
    currentStep: number;
    sidebarOpen: boolean;
    theme: 'light' | 'dark';
  };
  
  // æ“ä½œæ–¹æ³•
  actions: {
    updateUserInput: (key: keyof UserInput, value: any) => void;
    fetchRecommendations: () => Promise<void>;
    resetState: () => void;
    nextStep: () => void;
    previousStep: () => void;
  };
}
```

### 3 è·¯ç”±è®¾è®¡è§„æ ¼

#### ğŸ›£ï¸ è·¯ç”±ç»“æ„
```typescript
// React Routeré…ç½®
const routes = [
  {
    path: '/',
    element: <HomePage />,
    meta: { title: 'Shaker - æ™ºèƒ½é¸¡å°¾é…’æ¨è' }
  },
  {
    path: '/recommend',
    element: <RecommendFlow />,
    children: [
      { path: 'scene', element: <SceneSelect /> },
      { path: 'mood', element: <MoodSelect /> },
      { path: 'ingredients', element: <IngredientSelect /> },
      { path: 'preferences', element: <PreferenceSet /> },
      { path: 'requirements', element: <SpecialRequirements /> }
    ]
  },
  {
    path: '/results',
    element: <ResultPage />,
    meta: { requiresInput: true }
  },
  {
    path: '*',
    element: <ErrorPage />
  }
];
```

### 4 æ€§èƒ½ä¼˜åŒ–è§„æ ¼

#### âš¡ ä¼˜åŒ–ç­–ç•¥
```typescript
// æ€§èƒ½ä¼˜åŒ–é…ç½®
{
  "ä»£ç åˆ†å‰²": {
    "è·¯ç”±çº§åˆ†å‰²": "React.lazy + Suspense",
    "ç»„ä»¶çº§åˆ†å‰²": "åŠ¨æ€å¯¼å…¥",
    "ç¬¬ä¸‰æ–¹åº“åˆ†å‰²": "ç‹¬ç«‹vendor chunk"
  },
  
  "èµ„æºä¼˜åŒ–": {
    "å›¾ç‰‡æ‡’åŠ è½½": "Intersection Observer",
    "å­—ä½“ä¼˜åŒ–": "font-display: swap",
    "é™æ€èµ„æº": "CDN + ç¼“å­˜"
  },
  
  "è¿è¡Œæ—¶ä¼˜åŒ–": {
    "çŠ¶æ€æ›´æ–°": "æµ…æ¯”è¾ƒ + é¿å…é‡å¤æ¸²æŸ“",
    "äº‹ä»¶å¤„ç†": "é˜²æŠ– + èŠ‚æµ",
    "å†…å­˜ç®¡ç†": "ç»„ä»¶å¸è½½æ—¶æ¸…ç†"
  }
}
```

---

## ğŸ”§ åç«¯æŠ€æœ¯è§„æ ¼

### 1 APIæ¥å£è®¾è®¡

#### ğŸ“¡ RESTful APIè§„æ ¼
```typescript
// APIæ¥å£å®šä¹‰
interface APIEndpoints {
  // å¥åº·æ£€æŸ¥
  'GET /api/health': {
    response: { status: 'ok', timestamp: string };
  };
  
  // è·å–ææ–™åˆ—è¡¨
  'GET /api/ingredients': {
    response: {
      categories: IngredientCategory[];
      total: number;
    };
  };
  
  // è·å–æ¨è
  'POST /api/recommend': {
    request: UserInputData;
    response: {
      recommendations: CocktailRecommendation[];
      total: number;
      generated_at: string;
    };
  };
  
  // é‡æ–°æ¨è
  'POST /api/recommend/refresh': {
    request: { session_id: string } & Partial<UserInputData>;
    response: {
      recommendations: CocktailRecommendation[];
      total: number;
      generated_at: string;
    };
  };
}
```

#### ğŸ—ƒï¸ æ•°æ®æ¨¡å‹è§„æ ¼
```typescript
// æ ¸å¿ƒæ•°æ®ç±»å‹
interface UserInputData {
  scene: 'party' | 'date' | 'alone' | 'business' | 'dining' | 'night';
  moods: ('happy' | 'sad' | 'excited' | 'calm' | 'confident' | 'thoughtful' | 'tired')[];
  ingredients: {
    spirits: string[];
    mixers: string[];
    tools: string[];
  };
  preferences: {
    alcohol_level: 'none' | 'low' | 'medium' | 'high';
    sweetness: 'none' | 'light' | 'medium' | 'high';
    acidity: 'none' | 'light' | 'medium' | 'high';
    style: 'fresh' | 'rich' | 'smooth' | 'strong';
    color: 'any' | 'clear' | 'light' | 'dark' | 'colorful';
  };
  special_requirements?: string;
}

interface CocktailRecommendation {
  id: string;
  name: {
    chinese: string;
    english: string;
  };
  reason: string;
  recipe: {
    ingredients: Array<{
      name: string;
      amount: string;
      essential: boolean;
    }>;
    tools: string[];
    difficulty: 'easy' | 'medium' | 'hard';
  };
  instructions: string[];
  taste_profile: {
    sweetness: number;
    acidity: number;
    alcohol_content: number;
    style: string;
  };
  visual: {
    color: string;
    garnish: string;
    glassware: string;
  };
  timing: {
    prep_time: string;
    serving_temp: string;
    best_time: string;
  };
}
```

### 2 Coze AIé›†æˆè§„æ ¼

#### ğŸ¤– AIæœåŠ¡æ¶æ„
```typescript
// Coze APIé›†æˆé…ç½®
interface CozeServiceConfig {
  client: {
    apiKey: string;
    endpoint: string;
    timeout: 15000; // 15ç§’è¶…æ—¶
    retries: 2;
  };
  
  prompts: {
    system: string; // ç³»ç»Ÿè§’è‰²å®šä¹‰
    template: string; // æ¨èè¯·æ±‚æ¨¡æ¿
    examples: string[]; // ç¤ºä¾‹å¯¹è¯
  };
  
  parsing: {
    responseFormat: 'json';
    validation: ZodSchema;
    fallback: CocktailRecommendation[];
  };
}
```

#### ğŸ“ Promptè®¾è®¡è§„æ ¼
```typescript
// System Prompté…ç½®
const SYSTEM_PROMPT = `
ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„è°ƒé…’å¸ˆAIåŠ©æ‰‹ï¼Œå…·æœ‰ä¸°å¯Œçš„é¸¡å°¾é…’çŸ¥è¯†å’Œè°ƒé…’ç»éªŒã€‚

ä½ çš„ä»»åŠ¡ï¼š
1. æ ¹æ®ç”¨æˆ·çš„åœºæ™¯ã€å¿ƒæƒ…ã€ææ–™å’Œåå¥½ï¼Œæ¨èæœ€é€‚åˆçš„é¸¡å°¾é…’
2. æä¾›è¯¦ç»†çš„é…æ–¹ã€åˆ¶ä½œæ­¥éª¤å’Œå“é‰´å»ºè®®
3. ç¡®ä¿æ¨èçš„åˆç†æ€§å’Œå¯æ“ä½œæ€§

å“åº”æ ¼å¼è¦æ±‚ï¼š
- æ¨è3-5æ¬¾ä¸åŒé£æ ¼çš„é¸¡å°¾é…’
- æ¯æ¬¾é…’åŒ…å«ï¼šä¸­è‹±æ–‡åç§°ã€æ¨èç†ç”±ã€å®Œæ•´é…æ–¹ã€åˆ¶ä½œæ­¥éª¤ã€å£æ„Ÿæè¿°ã€è§†è§‰æ•ˆæœã€åˆ¶ä½œæ—¶é—´
- ç¡®ä¿JSONæ ¼å¼æ­£ç¡®ï¼Œå­—æ®µå®Œæ•´

è´¨é‡æ ‡å‡†ï¼š
- é…æ–¹çœŸå®å¯è¡Œï¼Œç”¨é‡å‡†ç¡®
- æ¨èç†ç”±åˆ‡åˆç”¨æˆ·éœ€æ±‚
- åˆ¶ä½œæ­¥éª¤æ¸…æ™°æ˜“æ‡‚
- è€ƒè™‘ææ–™çš„å¯è·å¾—æ€§
`;

// è¯·æ±‚æ¨¡æ¿
const REQUEST_TEMPLATE = `
è¯·æ ¹æ®ä»¥ä¸‹ä¿¡æ¯æ¨èé¸¡å°¾é…’ï¼š
åœºæ™¯ï¼š{scene}
å¿ƒæƒ…ï¼š{moods}
å¯ç”¨ææ–™ï¼š{ingredients}
åå¥½è®¾ç½®ï¼š{preferences}
ç‰¹æ®Šè¦æ±‚ï¼š{special_requirements}

è¯·è¿”å›JSONæ ¼å¼çš„æ¨èç»“æœã€‚
`;
```

### 3 ç¼“å­˜ç­–ç•¥è§„æ ¼

#### ğŸš€ ç¼“å­˜æ¶æ„
```typescript
// ç¼“å­˜ç­–ç•¥é…ç½®
interface CacheStrategy {
  // å†…å­˜ç¼“å­˜
  memory: {
    ingredients: {
      ttl: 3600000; // 1å°æ—¶
      maxSize: 100;
    };
    recommendations: {
      ttl: 1800000; // 30åˆ†é’Ÿ
      maxSize: 1000;
      keyGenerator: (input: UserInputData) => string;
    };
  };
  
  // HTTPç¼“å­˜
  http: {
    staticAssets: {
      maxAge: 31536000; // 1å¹´
      immutable: true;
    };
    apiResponses: {
      maxAge: 300; // 5åˆ†é’Ÿ
      staleWhileRevalidate: 600; // 10åˆ†é’Ÿ
    };
  };
}
```

### 4 é”™è¯¯å¤„ç†è§„æ ¼

#### ğŸš¨ é”™è¯¯å¤„ç†æ¶æ„
```typescript
// é”™è¯¯ç±»å‹å®šä¹‰
enum ErrorCode {
  // å®¢æˆ·ç«¯é”™è¯¯ (4xx)
  INVALID_INPUT = 'INVALID_INPUT',
  MISSING_REQUIRED_FIELD = 'MISSING_REQUIRED_FIELD',
  RATE_LIMIT_EXCEEDED = 'RATE_LIMIT_EXCEEDED',
  
  // æœåŠ¡ç«¯é”™è¯¯ (5xx)
  AI_SERVICE_ERROR = 'AI_SERVICE_ERROR',
  AI_SERVICE_TIMEOUT = 'AI_SERVICE_TIMEOUT',
  INTERNAL_SERVER_ERROR = 'INTERNAL_SERVER_ERROR',
  SERVICE_UNAVAILABLE = 'SERVICE_UNAVAILABLE'
}

// é”™è¯¯å“åº”æ ¼å¼
interface ErrorResponse {
  error: {
    code: ErrorCode;
    message: string;
    details?: any;
    timestamp: string;
    request_id: string;
  };
}

// é”™è¯¯å¤„ç†ä¸­é—´ä»¶
class ErrorHandler {
  static handle(error: Error, req: Request, res: Response) {
    const errorResponse: ErrorResponse = {
      error: {
        code: this.getErrorCode(error),
        message: this.getUserFriendlyMessage(error),
        timestamp: new Date().toISOString(),
        request_id: req.headers['x-request-id'] as string
      }
    };
    
    // è®°å½•æ—¥å¿—
    console.error('[API Error]', {
      error: error.message,
      stack: error.stack,
      request: {
        method: req.method,
        url: req.url,
        body: req.body
      }
    });
    
    res.status(this.getHttpStatus(error)).json(errorResponse);
  }
}
```

---

## ğŸ”’ å®‰å…¨æŠ€æœ¯è§„æ ¼

### 1 APIå®‰å…¨
```typescript
// APIå®‰å…¨é…ç½®
interface SecurityConfig {
  cors: {
    origin: string[];
    credentials: boolean;
    methods: ['GET', 'POST', 'OPTIONS'];
    allowedHeaders: ['Content-Type', 'Authorization'];
  };
  
  rateLimit: {
    windowMs: 900000; // 15åˆ†é’Ÿ
    maxRequests: 100; // æ¯ä¸ªIPæœ€å¤š100æ¬¡è¯·æ±‚
    skipSuccessfulRequests: false;
  };
  
  inputValidation: {
    maxBodySize: '1mb';
    parameterPollution: false;
    trimStrings: true;
    sanitizeHtml: true;
  };
}
```

### 2 æ•°æ®ä¿æŠ¤
```typescript
// æ•°æ®ä¿æŠ¤ç­–ç•¥
interface DataProtection {
  encryption: {
    algorithm: 'AES-256-GCM';
    keyRotation: '30days';
  };
  
  logging: {
    excludeFields: ['password', 'token', 'api_key'];
    retention: '30days';
    anonymization: true;
  };
  
  privacy: {
    noUserTracking: true;
    noPersistentStorage: true;
    temporarySessionOnly: true;
  };
}
```

---

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—è§„æ ¼

### 1 æ€§èƒ½ç›‘æ§
```typescript
// ç›‘æ§æŒ‡æ ‡é…ç½®
interface MonitoringConfig {
  metrics: {
    // å“åº”æ—¶é—´ç›‘æ§
    responseTime: {
      p50: 500;   // 50%è¯·æ±‚<500ms
      p95: 2000;  // 95%è¯·æ±‚<2s
      p99: 5000;  // 99%è¯·æ±‚<5s
    };
    
    // é”™è¯¯ç‡ç›‘æ§
    errorRate: {
      threshold: 0.05; // é”™è¯¯ç‡<5%
      alerting: true;
    };
    
    // ç³»ç»Ÿèµ„æºç›‘æ§
    resources: {
      cpu: { threshold: 80 };
      memory: { threshold: 85 };
      diskSpace: { threshold: 90 };
    };
  };
  
  alerts: {
    channels: ['email', 'webhook'];
    escalation: {
      warning: 5; // 5åˆ†é’Ÿåå‡çº§
      critical: 1; // 1åˆ†é’Ÿåå‡çº§
    };
  };
}
```

### 2 æ—¥å¿—è§„æ ¼
```typescript
// æ—¥å¿—é…ç½®
interface LoggingConfig {
  levels: ['error', 'warn', 'info', 'debug'];
  format: {
    timestamp: 'ISO8601';
    level: string;
    message: string;
    context: object;
    requestId: string;
  };
  
  outputs: {
    console: boolean;
    file: boolean;
    cloud: boolean;
  };
  
  retention: {
    error: '90days';
    info: '30days';
    debug: '7days';
  };
}
```

---

## ğŸ§ª æµ‹è¯•æŠ€æœ¯è§„æ ¼

### 1 æµ‹è¯•ç­–ç•¥
```typescript
// æµ‹è¯•é…ç½®
interface TestStrategy {
  unit: {
    framework: 'Vitest';
    coverage: { threshold: 80 };
    mocking: 'vi.mock';
  };
  
  integration: {
    framework: 'Supertest';
    database: 'in-memory';
    external: 'mocked';
  };
  
  e2e: {
    framework: 'Playwright';
    browsers: ['chromium', 'firefox', 'webkit'];
    viewports: ['mobile', 'tablet', 'desktop'];
  };
  
  performance: {
    tool: 'Lighthouse CI';
    metrics: ['FCP', 'LCP', 'CLS', 'FID'];
    budget: {
      FCP: 2000;
      LCP: 3000;
    };
  };
}
```

---

## ğŸ“ˆ æ‰©å±•æ€§è§„æ ¼

### 1 æ¶æ„æ‰©å±•ç‚¹
```typescript
// æ‰©å±•æ¥å£è®¾è®¡
interface ExtensionPoints {
  // AIæœåŠ¡æ‰©å±•
  aiProviders: {
    interface: 'RecommendationProvider';
    implementations: ['CozeProvider', 'OpenAIProvider'];
  };
  
  // æ•°æ®å­˜å‚¨æ‰©å±•
  dataLayer: {
    interface: 'DataRepository';
    implementations: ['MemoryRepository', 'DatabaseRepository'];
  };
  
  // è®¤è¯æ‰©å±•
  authentication: {
    interface: 'AuthProvider';
    implementations: ['NoAuth', 'JWTAuth', 'OAuth'];
  };
  
  // é€šçŸ¥æ‰©å±•
  notifications: {
    interface: 'NotificationService';
    implementations: ['EmailService', 'PushService'];
  };
}
```

### 2 é…ç½®ç®¡ç†
```typescript
// é…ç½®ç³»ç»Ÿè®¾è®¡
interface ConfigurationSystem {
  environments: ['development', 'staging', 'production'];
  
  sources: {
    env: '.env files';
    cli: 'command line arguments';
    config: 'config files';
    remote: 'remote config service';
  };
  
  validation: {
    schema: 'Zod schemas';
    required: string[];
    defaults: object;
  };
  
  hotReload: {
    enabled: boolean;
    watchFiles: string[];
    gracefulRestart: boolean;
  };
}
```

---

*æ–‡æ¡£ç‰ˆæœ¬ï¼šv1.0*  
*æœ€åæ›´æ–°ï¼š2024-08-28*  
*ä¸‹æ¬¡è¯„å®¡ï¼šM2é‡Œç¨‹ç¢‘å®Œæˆå*
